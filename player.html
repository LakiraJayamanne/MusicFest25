<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>MusicFest25 â€” Player</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* Keep this page tidy; it's intended to be loaded in a hidden iframe. */
    body { margin:0; font-family: system-ui, sans-serif; }
    .player-ui { position:fixed; right:8px; bottom:8px; background:rgba(0,0,0,0.6); color:#fff; padding:8px 10px; border-radius:8px; font-size:14px; display:flex; gap:10px; align-items:center }
    .player-ui button { background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.2); padding:6px 8px; border-radius:6px; cursor:pointer }
  </style>
</head>
<body>
  <div class="player-ui" id="playerUI" aria-hidden="true" style="display:none;">
    <span id="trackName">Playing</span>
    <button id="toggle">Pause</button>
  </div>

  <script src="js/audioManager.js"></script>
  <script>
    // Do not auto-initialize or auto-play in this hidden player iframe.
    // The global player UI (`player-ui.js`) is responsible for calling
    // `AudioManager.init()` and `AudioManager.play()` on user gestures.
    window.addEventListener('DOMContentLoaded', () => {
      // If someone opens player.html directly, show a minimal UI that lets
      // the user initialize/play manually.
      const ui = document.getElementById('playerUI');
      const toggle = document.getElementById('toggle');
      const trackName = document.getElementById('trackName');
      ui.style.display = 'flex';
      toggle.addEventListener('click', async () => {
        try {
          if (!window.AudioManager) return;
          AudioManager.init();
          if (AudioManager.isPlaying && AudioManager.isPlaying()) {
            AudioManager.pause();
            toggle.textContent = 'Play';
          } else {
            await AudioManager.play().catch(() => {});
            toggle.textContent = 'Pause';
          }
          try { trackName.textContent = AudioManager.getCurrentTitle ? AudioManager.getCurrentTitle() : 'Track'; } catch(e){}
        } catch (e) { console.warn(e); }
      });
    });
  </script>
</body>
</html>
